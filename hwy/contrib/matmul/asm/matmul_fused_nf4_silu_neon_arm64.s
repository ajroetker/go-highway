//go:build !noasm && arm64
// Code generated by GoAT. DO NOT EDIT.
// versions:
// 	clang   17.0.0 (clang-1700.0.13.5)
// 	objdump 17.0.0
// flags: -O3
// source: ../c/matmul_fused_nf4_silu_neon_arm64.c

TEXT ·fused_nf4_silu_matmul_neon(SB), $64-72
	MOVD input+0(FP), R0
	MOVD packed+8(FP), R1
	MOVD scales+16(FP), R2
	MOVD output+24(FP), R3
	MOVD pM+32(FP), R4
	MOVD pK+40(FP), R5
	MOVD pN+48(FP), R6
	MOVD pGroupSize+56(FP), R7
	MOVD pNumGroups+64(FP), R8
	MOVD R8, 0(RSP)
	WORD $0xf9400088           // ldr	x8, [x4]
	WORD $0xf100051f           // cmp	x8, #1
	BLT  BB0_14
	WORD $0xf94000c9           // ldr	x9, [x6]
	WORD $0xf100053f           // cmp	x9, #1
	BLT  BB0_14
	WORD $0xa90067fd           // stp	x29, x25, [sp, #-64]! [transformed]
	WORD $0xf94000aa           // ldr	x10, [x5]
	WORD $0xa9015ff8           // stp	x24, x23, [sp, #16]
	WORD $0xa90257f6           // stp	x22, x21, [sp, #32]
	WORD $0xf100055f           // cmp	x10, #1
	WORD $0xa9034ff4           // stp	x20, x19, [sp, #48]
	BLT  BB0_9
	WORD $0x528e430d           // mov	w13, #29208
	WORD $0xf94023ec           // ldr	x12, [sp, #64]
	WORD $0x5295476e           // mov	w14, #43579
	WORD $0x72b8562d           // movk	w13, #49841, lsl #16
	WORD $0x72b7f70e           // movk	w14, #49080, lsl #16
	WORD $0x52958a0f           // mov	w15, #44112
	WORD $0x4e040da0           // dup	v0.4s, w13
	WORD $0x5290000d           // mov	w13, #32768
	WORD $0x4e040dc1           // dup	v1.4s, w14
	WORD $0x72b7e62d           // movk	w13, #48945, lsl #16
	WORD $0x5291112e           // mov	w14, #34953
	WORD $0x4f03f606           // fmov	v6.4s, #1.00000000
	WORD $0x4e040da2           // dup	v2.4s, w13
	WORD $0xf940018d           // ldr	x13, [x12]
	WORD $0x5290106c           // mov	w12, #32899
	WORD $0x72a72bcc           // movk	w12, #14686, lsl #16
	WORD $0x72a7810e           // movk	w14, #15368, lsl #16
	WORD $0x72a855cf           // movk	w15, #17070, lsl #16
	WORD $0x4e040d83           // dup	v3.4s, w12
	WORD $0x52816c2c           // mov	w12, #2913
	WORD $0x4e040dc5           // dup	v5.4s, w14
	WORD $0x72a756cc           // movk	w12, #15030, lsl #16
	WORD $0x5295556e           // mov	w14, #43691
	WORD $0x4e040df1           // dup	v17.4s, w15
	WORD $0x4e040d84           // dup	v4.4s, w12
	WORD $0x5295556c           // mov	w12, #43691
	WORD $0x72a7c54e           // movk	w14, #15914, lsl #16
	WORD $0x72a7a54c           // movk	w12, #15658, lsl #16
	WORD $0x4e040dd0           // dup	v16.4s, w14
	WORD $0xd37ef5ad           // lsl	x13, x13, #2
	WORD $0x4e040d87           // dup	v7.4s, w12
	WORD $0xf94000ec           // ldr	x12, [x7]
	WORD $0xd37ef54e           // lsl	x14, x10, #2
	WORD $0xaa1f03eb           // mov	x11, xzr
	WORD $0x9000000f           // adrp	x15, nf4_table
	WORD $0x910001ef           // add	x15, x15, :lo12:nf4_table

BB0_4:
	WORD $0x9b097d70 // mul	x16, x11, x9
	WORD $0xaa1f03f1 // mov	x17, xzr
	WORD $0x8b100870 // add	x16, x3, x16, lsl #2

BB0_5:
	WORD $0xb2400225 // orr	x5, x17, #0x1
	WORD $0xb27f0226 // orr	x6, x17, #0x2
	WORD $0xb2400627 // orr	x7, x17, #0x3
	WORD $0x9acc0e24 // sdiv	x4, x17, x12
	WORD $0x6f00e412 // movi	v18.2d, #0000000000000000
	WORD $0xaa0003f3 // mov	x19, x0
	WORD $0xaa1103f4 // mov	x20, x17
	WORD $0xaa0203f5 // mov	x21, x2
	WORD $0xaa0a03f6 // mov	x22, x10
	WORD $0x9acc0ca5 // sdiv	x5, x5, x12
	WORD $0x9acc0cc6 // sdiv	x6, x6, x12
	WORD $0x9acc0ce7 // sdiv	x7, x7, x12

BB0_6:
	WORD $0xd341fe97 // lsr	x23, x20, #1
	WORD $0x91000a98 // add	x24, x20, #2
	WORD $0xbc647ab5 // ldr	s21, [x21, x4, lsl #2]
	WORD $0xd341ff18 // lsr	x24, x24, #1
	WORD $0xbc657ab6 // ldr	s22, [x21, x5, lsl #2]
	WORD $0xbc667ab8 // ldr	s24, [x21, x6, lsl #2]
	WORD $0x38776837 // ldrb	w23, [x1, x23]
	WORD $0xf10006d6 // subs	x22, x22, #1
	WORD $0x8b090294 // add	x20, x20, x9
	WORD $0x38786838 // ldrb	w24, [x1, x24]
	WORD $0xd342fef9 // lsr	x25, x23, #2
	WORD $0x92400ef7 // and	x23, x23, #0xf
	WORD $0xd342ff1d // lsr	x29, x24, #2
	WORD $0x92400f18 // and	x24, x24, #0xf
	WORD $0xbc7779f3 // ldr	s19, [x15, x23, lsl #2]
	WORD $0x927e0f39 // and	x25, x25, #0x3c
	WORD $0xbc7879f7 // ldr	s23, [x15, x24, lsl #2]
	WORD $0xbc7969f4 // ldr	s20, [x15, x25]
	WORD $0x927e0fb7 // and	x23, x29, #0x3c
	WORD $0x8b070ab9 // add	x25, x21, x7, lsl #2
	WORD $0x1e350a73 // fmul	s19, s19, s21
	WORD $0x8b1701f7 // add	x23, x15, x23
	WORD $0x8b0d02b5 // add	x21, x21, x13
	WORD $0x1e360a94 // fmul	s20, s20, s22
	WORD $0x0d4092f7 // ld1	{ v23.s }[1], [x23]
	WORD $0x0d409338 // ld1	{ v24.s }[1], [x25]
	WORD $0x2e38def5 // fmul	v21.2s, v23.2s, v24.2s
	WORD $0x6e0c0693 // mov	v19.s[1], v20.s[0]
	WORD $0xbc404674 // ldr	s20, [x19], #4
	WORD $0x6e1806b3 // mov	v19.d[1], v21.d[0]
	WORD $0x4f941272 // fmla	v18.4s, v19.4s, v20.s[0]
	BNE  BB0_6
	WORD $0x6e21de53 // fmul	v19.4s, v18.4s, v1.4s
	WORD $0x4ea71cf6 // mov	v22.16b, v7.16b
	WORD $0xd37ef624 // lsl	x4, x17, #2
	WORD $0x91001231 // add	x17, x17, #4
	WORD $0xeb09023f // cmp	x17, x9
	WORD $0x4e218a73 // frintn	v19.4s, v19.4s
	WORD $0x6e22de74 // fmul	v20.4s, v19.4s, v2.4s
	WORD $0x6e23de75 // fmul	v21.4s, v19.4s, v3.4s
	WORD $0x4e21aa73 // fcvtns	v19.4s, v19.4s
	WORD $0x4eb2d694 // fsub	v20.4s, v20.4s, v18.4s
	WORD $0x4f375673 // shl	v19.4s, v19.4s, #23
	WORD $0x4ea68673 // add	v19.4s, v19.4s, v6.4s
	WORD $0x4e35d694 // fadd	v20.4s, v20.4s, v21.4s
	WORD $0x4ea51cb5 // mov	v21.16b, v5.16b
	WORD $0x4e34cc95 // fmla	v21.4s, v4.4s, v20.4s
	WORD $0x4e35ce96 // fmla	v22.4s, v20.4s, v21.4s
	WORD $0x4eb01e15 // mov	v21.16b, v16.16b
	WORD $0x4e36ce95 // fmla	v21.4s, v20.4s, v22.4s
	WORD $0x4f0167f6 // movi	v22.4s, #63, lsl #24
	WORD $0x4e35ce96 // fmla	v22.4s, v20.4s, v21.4s
	WORD $0x4ea61cd5 // mov	v21.16b, v6.16b
	WORD $0x4e36ce95 // fmla	v21.4s, v20.4s, v22.4s
	WORD $0x4ea61cd6 // mov	v22.16b, v6.16b
	WORD $0x4e35ce96 // fmla	v22.4s, v20.4s, v21.4s
	WORD $0x6eb2e414 // fcmgt	v20.4s, v0.4s, v18.4s
	WORD $0x6eb1e655 // fcmgt	v21.4s, v18.4s, v17.4s
	WORD $0x6e33ded3 // fmul	v19.4s, v22.4s, v19.4s
	WORD $0x4e26d673 // fadd	v19.4s, v19.4s, v6.4s
	WORD $0x6e33fcd3 // fdiv	v19.4s, v6.4s, v19.4s
	WORD $0x4e741e73 // bic	v19.16b, v19.16b, v20.16b
	WORD $0x6eb51cd3 // bit	v19.16b, v6.16b, v21.16b
	WORD $0x6e33de52 // fmul	v18.4s, v18.4s, v19.4s
	WORD $0x3ca46a12 // str	q18, [x16, x4]
	BLT  BB0_5
	WORD $0x9100056b // add	x11, x11, #1
	WORD $0x8b0e0000 // add	x0, x0, x14
	WORD $0xeb08017f // cmp	x11, x8
	BNE  BB0_4
	B    BB0_13

BB0_9:
	WORD $0x4f046400 // movi	v0.4s, #128, lsl #24
	WORD $0x4f03f601 // fmov	v1.4s, #1.00000000
	WORD $0xd37ef52a // lsl	x10, x9, #2
	WORD $0xaa1f03eb // mov	x11, xzr
	WORD $0x4e21a800 // fcvtns	v0.4s, v0.4s
	WORD $0x4f375400 // shl	v0.4s, v0.4s, #23
	WORD $0x4ea18400 // add	v0.4s, v0.4s, v1.4s
	WORD $0x4e21d400 // fadd	v0.4s, v0.4s, v1.4s
	WORD $0x6e20fc20 // fdiv	v0.4s, v1.4s, v0.4s
	WORD $0x6f00e401 // movi	v1.2d, #0000000000000000
	WORD $0x6e21dc00 // fmul	v0.4s, v0.4s, v1.4s

BB0_10:
	WORD $0xaa1f03ec // mov	x12, xzr
	WORD $0xaa0303ed // mov	x13, x3

BB0_11:
	WORD $0x9100118c // add	x12, x12, #4
	WORD $0x3c8105a0 // str	q0, [x13], #16
	WORD $0xeb09019f // cmp	x12, x9
	BLT  BB0_11
	WORD $0x9100056b // add	x11, x11, #1
	WORD $0x8b0a0063 // add	x3, x3, x10
	WORD $0xeb08017f // cmp	x11, x8
	BNE  BB0_10

BB0_13:
	WORD $0xa9434ff4 // ldp	x20, x19, [sp, #48]
	WORD $0xa94257f6 // ldp	x22, x21, [sp, #32]
	WORD $0xa9415ff8 // ldp	x24, x23, [sp, #16]
	WORD $0xa94067fd // ldp	x29, x25, [sp], #64 [transformed]

BB0_14:
	RET

TEXT ·fused_int4_silu_matmul_neon(SB), $48-72
	MOVD input+0(FP), R0
	MOVD packed+8(FP), R1
	MOVD scales+16(FP), R2
	MOVD output+24(FP), R3
	MOVD pM+32(FP), R4
	MOVD pK+40(FP), R5
	MOVD pN+48(FP), R6
	MOVD pGroupSize+56(FP), R7
	MOVD pNumGroups+64(FP), R8
	MOVD R8, 0(RSP)
	WORD $0xf9400088           // ldr	x8, [x4]
	WORD $0xf100051f           // cmp	x8, #1
	BLT  BB1_14
	WORD $0xf94000c9           // ldr	x9, [x6]
	WORD $0xf100053f           // cmp	x9, #1
	BLT  BB1_14
	WORD $0xa9005ff8           // stp	x24, x23, [sp, #-48]! [transformed]
	WORD $0xf94000aa           // ldr	x10, [x5]
	WORD $0xa90157f6           // stp	x22, x21, [sp, #16]
	WORD $0xa9024ff4           // stp	x20, x19, [sp, #32]
	WORD $0xf100055f           // cmp	x10, #1
	BLT  BB1_9
	WORD $0x528e430b           // mov	w11, #29208
	WORD $0x5295476d           // mov	w13, #43579
	WORD $0xf9401bec           // ldr	x12, [sp, #48]
	WORD $0x72b8562b           // movk	w11, #49841, lsl #16
	WORD $0x72b7f70d           // movk	w13, #49080, lsl #16
	WORD $0x4f03f607           // fmov	v7.4s, #1.00000000
	WORD $0x4e040d60           // dup	v0.4s, w11
	WORD $0x5290000b           // mov	w11, #32768
	WORD $0x4e040da1           // dup	v1.4s, w13
	WORD $0x72b7e62b           // movk	w11, #48945, lsl #16
	WORD $0x5290106d           // mov	w13, #32899
	WORD $0xf940018c           // ldr	x12, [x12]
	WORD $0x4e040d62           // dup	v2.4s, w11
	WORD $0x52816c2b           // mov	w11, #2913
	WORD $0x72a72bcd           // movk	w13, #14686, lsl #16
	WORD $0x72a756cb           // movk	w11, #15030, lsl #16
	WORD $0x4e040da3           // dup	v3.4s, w13
	WORD $0x5295556d           // mov	w13, #43691
	WORD $0x4e040d64           // dup	v4.4s, w11
	WORD $0x5291112b           // mov	w11, #34953
	WORD $0x72a7a54d           // movk	w13, #15658, lsl #16
	WORD $0x72a7810b           // movk	w11, #15368, lsl #16
	WORD $0x4e040da6           // dup	v6.4s, w13
	WORD $0x52958a0d           // mov	w13, #44112
	WORD $0x4e040d65           // dup	v5.4s, w11
	WORD $0x5295556b           // mov	w11, #43691
	WORD $0x72a855cd           // movk	w13, #17070, lsl #16
	WORD $0x72a7c54b           // movk	w11, #15914, lsl #16
	WORD $0x2f0004f0           // mvni	v16.2s, #7
	WORD $0x4e040db2           // dup	v18.4s, w13
	WORD $0x4e040d71           // dup	v17.4s, w11
	WORD $0xf94000eb           // ldr	x11, [x7]
	WORD $0xd37ef58c           // lsl	x12, x12, #2
	WORD $0xd37ef54d           // lsl	x13, x10, #2
	WORD $0xaa1f03ee           // mov	x14, xzr

BB1_4:
	WORD $0x9b097dcf // mul	x15, x14, x9
	WORD $0xaa1f03f0 // mov	x16, xzr
	WORD $0x8b0f086f // add	x15, x3, x15, lsl #2

BB1_5:
	WORD $0xb2400204 // orr	x4, x16, #0x1
	WORD $0xb27f0205 // orr	x5, x16, #0x2
	WORD $0xb2400606 // orr	x6, x16, #0x3
	WORD $0x9acb0e11 // sdiv	x17, x16, x11
	WORD $0x6f00e413 // movi	v19.2d, #0000000000000000
	WORD $0xaa0003e7 // mov	x7, x0
	WORD $0xaa1003f3 // mov	x19, x16
	WORD $0xaa0203f4 // mov	x20, x2
	WORD $0xaa0a03f5 // mov	x21, x10
	WORD $0x9acb0c84 // sdiv	x4, x4, x11
	WORD $0x9acb0ca5 // sdiv	x5, x5, x11
	WORD $0x9acb0cc6 // sdiv	x6, x6, x11

BB1_6:
	WORD $0x91000a76 // add	x22, x19, #2
	WORD $0xd341fe77 // lsr	x23, x19, #1
	WORD $0xbc717a97 // ldr	s23, [x20, x17, lsl #2]
	WORD $0xd341fed6 // lsr	x22, x22, #1
	WORD $0xbc647a98 // ldr	s24, [x20, x4, lsl #2]
	WORD $0xbc657a99 // ldr	s25, [x20, x5, lsl #2]
	WORD $0x38776837 // ldrb	w23, [x1, x23]
	WORD $0xf10006b5 // subs	x21, x21, #1
	WORD $0x8b090273 // add	x19, x19, x9
	WORD $0x38766836 // ldrb	w22, [x1, x22]
	WORD $0x12000ed8 // and	w24, w22, #0xf
	WORD $0x53047ed6 // lsr	w22, w22, #4
	WORD $0x1e270314 // fmov	s20, w24
	WORD $0x53047ef8 // lsr	w24, w23, #4
	WORD $0x4e0c1ed4 // mov	v20.s[1], w22
	WORD $0x12000ef6 // and	w22, w23, #0xf
	WORD $0x51002317 // sub	w23, w24, #8
	WORD $0x510022d6 // sub	w22, w22, #8
	WORD $0x1e2202f6 // scvtf	s22, w23
	WORD $0x1e2202d5 // scvtf	s21, w22
	WORD $0x8b060a96 // add	x22, x20, x6, lsl #2
	WORD $0x8b0c0294 // add	x20, x20, x12
	WORD $0x0eb08694 // add	v20.2s, v20.2s, v16.2s
	WORD $0x0d4092d9 // ld1	{ v25.s }[1], [x22]
	WORD $0x1e360b16 // fmul	s22, s24, s22
	WORD $0x1e350af5 // fmul	s21, s23, s21
	WORD $0x0e21da94 // scvtf	v20.2s, v20.2s
	WORD $0x6e0c06d5 // mov	v21.s[1], v22.s[0]
	WORD $0x2e34df34 // fmul	v20.2s, v25.2s, v20.2s
	WORD $0x6e180695 // mov	v21.d[1], v20.d[0]
	WORD $0xbc4044f4 // ldr	s20, [x7], #4
	WORD $0x4f9412b3 // fmla	v19.4s, v21.4s, v20.s[0]
	BNE  BB1_6
	WORD $0x6e21de74 // fmul	v20.4s, v19.4s, v1.4s
	WORD $0x4ea61cd7 // mov	v23.16b, v6.16b
	WORD $0xd37ef611 // lsl	x17, x16, #2
	WORD $0x91001210 // add	x16, x16, #4
	WORD $0xeb09021f // cmp	x16, x9
	WORD $0x4e218a94 // frintn	v20.4s, v20.4s
	WORD $0x6e22de95 // fmul	v21.4s, v20.4s, v2.4s
	WORD $0x6e23de96 // fmul	v22.4s, v20.4s, v3.4s
	WORD $0x4e21aa94 // fcvtns	v20.4s, v20.4s
	WORD $0x4eb3d6b5 // fsub	v21.4s, v21.4s, v19.4s
	WORD $0x4f375694 // shl	v20.4s, v20.4s, #23
	WORD $0x4ea78694 // add	v20.4s, v20.4s, v7.4s
	WORD $0x4e36d6b5 // fadd	v21.4s, v21.4s, v22.4s
	WORD $0x4ea51cb6 // mov	v22.16b, v5.16b
	WORD $0x4e35cc96 // fmla	v22.4s, v4.4s, v21.4s
	WORD $0x4e36ceb7 // fmla	v23.4s, v21.4s, v22.4s
	WORD $0x4eb11e36 // mov	v22.16b, v17.16b
	WORD $0x4e37ceb6 // fmla	v22.4s, v21.4s, v23.4s
	WORD $0x4f0167f7 // movi	v23.4s, #63, lsl #24
	WORD $0x4e36ceb7 // fmla	v23.4s, v21.4s, v22.4s
	WORD $0x4ea71cf6 // mov	v22.16b, v7.16b
	WORD $0x4e37ceb6 // fmla	v22.4s, v21.4s, v23.4s
	WORD $0x4ea71cf7 // mov	v23.16b, v7.16b
	WORD $0x4e36ceb7 // fmla	v23.4s, v21.4s, v22.4s
	WORD $0x6eb3e415 // fcmgt	v21.4s, v0.4s, v19.4s
	WORD $0x6eb2e676 // fcmgt	v22.4s, v19.4s, v18.4s
	WORD $0x6e34def4 // fmul	v20.4s, v23.4s, v20.4s
	WORD $0x4e27d694 // fadd	v20.4s, v20.4s, v7.4s
	WORD $0x6e34fcf4 // fdiv	v20.4s, v7.4s, v20.4s
	WORD $0x4e751e94 // bic	v20.16b, v20.16b, v21.16b
	WORD $0x6eb61cf4 // bit	v20.16b, v7.16b, v22.16b
	WORD $0x6e34de73 // fmul	v19.4s, v19.4s, v20.4s
	WORD $0x3cb169f3 // str	q19, [x15, x17]
	BLT  BB1_5
	WORD $0x910005ce // add	x14, x14, #1
	WORD $0x8b0d0000 // add	x0, x0, x13
	WORD $0xeb0801df // cmp	x14, x8
	BNE  BB1_4
	B    BB1_13

BB1_9:
	WORD $0x4f046400 // movi	v0.4s, #128, lsl #24
	WORD $0x4f03f601 // fmov	v1.4s, #1.00000000
	WORD $0xd37ef52a // lsl	x10, x9, #2
	WORD $0xaa1f03eb // mov	x11, xzr
	WORD $0x4e21a800 // fcvtns	v0.4s, v0.4s
	WORD $0x4f375400 // shl	v0.4s, v0.4s, #23
	WORD $0x4ea18400 // add	v0.4s, v0.4s, v1.4s
	WORD $0x4e21d400 // fadd	v0.4s, v0.4s, v1.4s
	WORD $0x6e20fc20 // fdiv	v0.4s, v1.4s, v0.4s
	WORD $0x6f00e401 // movi	v1.2d, #0000000000000000
	WORD $0x6e21dc00 // fmul	v0.4s, v0.4s, v1.4s

BB1_10:
	WORD $0xaa1f03ec // mov	x12, xzr
	WORD $0xaa0303ed // mov	x13, x3

BB1_11:
	WORD $0x9100118c // add	x12, x12, #4
	WORD $0x3c8105a0 // str	q0, [x13], #16
	WORD $0xeb09019f // cmp	x12, x9
	BLT  BB1_11
	WORD $0x9100056b // add	x11, x11, #1
	WORD $0x8b0a0063 // add	x3, x3, x10
	WORD $0xeb08017f // cmp	x11, x8
	BNE  BB1_10

BB1_13:
	WORD $0xa9424ff4 // ldp	x20, x19, [sp, #32]
	WORD $0xa94157f6 // ldp	x22, x21, [sp, #16]
	WORD $0xa9405ff8 // ldp	x24, x23, [sp], #48 [transformed]

BB1_14:
	RET
