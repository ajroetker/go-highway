//go:build !noasm && arm64
// Code generated by GoAT. DO NOT EDIT.
// versions:
// 	clang   21.1.8
// 	objdump 2.45.1
// flags: -march=armv8-a+simd+fp -fno-builtin-memset -O3
// source: /Users/ajroetker/go/src/github.com/ajroetker/go-highway/hwy/contrib/matmul/asm/basefusedint8matmulrelu_c_f32_neon_arm64.c

#include "textflag.h"

// Constant pool data
DATA CPI0_0<>+0(SB)/4, $0x00ffffff
DATA CPI0_0<>+4(SB)/4, $0x01ffffff
DATA CPI0_0<>+8(SB)/4, $0x02ffffff
DATA CPI0_0<>+12(SB)/4, $0x03ffffff
GLOBL CPI0_0<>(SB), (RODATA|NOPTR), $16

TEXT Â·fusedint8matmulrelu_c_f32_neon(SB), $131184-112
	MOVD input+0(FP), R0
	MOVD weights+8(FP), R1
	MOVD scales+16(FP), R2
	MOVD bias+24(FP), R3
	MOVD output+32(FP), R4
	MOVD pM+40(FP), R5
	MOVD pK+48(FP), R6
	MOVD pN+56(FP), R7
	MOVD pgroupSize+64(FP), R8
	MOVD R8, 64(RSP)
	MOVD plen_input+72(FP), R8
	MOVD R8, 72(RSP)
	MOVD plen_weights+80(FP), R8
	MOVD R8, 80(RSP)
	MOVD plen_scales+88(FP), R8
	MOVD R8, 88(RSP)
	MOVD plen_bias+96(FP), R8
	MOVD R8, 96(RSP)
	MOVD plen_output+104(FP), R8
	MOVD R8, 104(RSP)
	WORD $0xf94000c8             // ldr	x8, [x6]
	WORD $0xf94000a9             // ldr	x9, [x5]
	WORD $0xf94000ea             // ldr	x10, [x7]
	WORD $0xf100013f             // cmp	x9, #0
	WORD $0xfa401904             // ccmp	x8, #0, #4, ne
	WORD $0xfa401944             // ccmp	x10, #0, #4, ne
	BEQ  BB0_28
	WORD $0xa9005ff8             // stp	x24, x23, [sp, #-64]!           ; 16-byte Folded Spill [transformed]
	WORD $0xa90157f6             // stp	x22, x21, [sp, #16]             ; 16-byte Folded Spill
	WORD $0xa9024ff4             // stp	x20, x19, [sp, #32]             ; 16-byte Folded Spill
	WORD $0xa9037bfd             // stp	x29, x30, [sp, #48]             ; 16-byte Folded Spill
	WORD $0x9100c3fd             // add	x29, sp, #48
	WORD $0x914083e5             // mov	x5, sp [transformed]
	WORD $0x914083ec             // mov	x12, sp [transformed]
	WORD $0xd37ef54b             // lsl	x11, x10, #2
	WORD $0x91003d6d             // add	x13, x11, #15
	WORD $0x927cedad             // and	x13, x13, #0xfffffffffffffff0
	WORD $0xcb0d018c             // sub	x12, x12, x13
	WORD $0xf100053f             // cmp	x9, #1
	BLT  BB0_27
	WORD $0xd280000d             // mov	x13, #0                         ; =0x0
	WORD $0xf9400bae             // ldr	x14, [x29, #16]
	WORD $0xf94001ce             // ldr	x14, [x14]
	WORD $0x8b0e014f             // add	x15, x10, x14
	WORD $0xd10005ef             // sub	x15, x15, #1
	MOVD $CPI0_0<>(SB), R16
	VLD1 (R16), [V0.B16]
	WORD $0x2f00e401             // movi	d1, #0000000000000000
	WORD $0x6f00e402             // movi.2d	v2, #0000000000000000
	WORD $0x9ace0def             // sdiv	x15, x15, x14
	B    BB0_4

BB0_3:
	WORD $0x910005ad // add	x13, x13, #1
	WORD $0x8b0b0084 // add	x4, x4, x11
	WORD $0xeb0901bf // cmp	x13, x9
	BEQ  BB0_27

BB0_4:
	WORD $0xaa0c03f0 // mov	x16, x12
	WORD $0xaa0a03f1 // mov	x17, x10
	WORD $0xf100055f // cmp	x10, #1
	BLT  BB0_6

BB0_5:
	WORD $0xb800461f // str	wzr, [x16], #4
	WORD $0xf1000631 // subs	x17, x17, #1
	BNE  BB0_5

BB0_6:
	WORD $0xf100051f // cmp	x8, #1
	BLT  BB0_15
	WORD $0xd2800010 // mov	x16, #0                         ; =0x0
	WORD $0x9b087db1 // mul	x17, x13, x8
	WORD $0x8b110811 // add	x17, x0, x17, lsl #2
	WORD $0xaa0103e6 // mov	x6, x1
	B    BB0_9

BB0_8:
	WORD $0x91000610 // add	x16, x16, #1
	WORD $0x8b0a00c6 // add	x6, x6, x10
	WORD $0xeb08021f // cmp	x16, x8
	BEQ  BB0_15

BB0_9:
	WORD $0xbc707a23 // ldr	s3, [x17, x16, lsl #2]
	WORD $0x9b0f7e07 // mul	x7, x16, x15
	WORD $0x8b070847 // add	x7, x2, x7, lsl #2
	WORD $0xf100115f // cmp	x10, #4
	BGE  BB0_11
	WORD $0xd2800015 // mov	x21, #0                         ; =0x0
	B    BB0_13

BB0_11:
	WORD $0xd2800014 // mov	x20, #0                         ; =0x0
	WORD $0xaa0c03f3 // mov	x19, x12

BB0_12:
	WORD $0x91000695 // add	x21, x20, #1
	WORD $0x9ace0eb5 // sdiv	x21, x21, x14
	WORD $0x8b1508f5 // add	x21, x7, x21, lsl #2
	WORD $0x91000a96 // add	x22, x20, #2
	WORD $0x9ace0ed6 // sdiv	x22, x22, x14
	WORD $0x8b1608f6 // add	x22, x7, x22, lsl #2
	WORD $0x91000e97 // add	x23, x20, #3
	WORD $0x9ace0ef7 // sdiv	x23, x23, x14
	WORD $0x8b1708f7 // add	x23, x7, x23, lsl #2
	WORD $0xbc7468c4 // ldr	s4, [x6, x20]
	WORD $0x4e000084 // tbl.16b	v4, { v4 }, v0
	WORD $0x9ace0e98 // sdiv	x24, x20, x14
	WORD $0xbc7878e5 // ldr	s5, [x7, x24, lsl #2]
	WORD $0x0d4092a5 // ld1.s	{ v5 }[1], [x21]
	WORD $0x4d4082c5 // ld1.s	{ v5 }[2], [x22]
	WORD $0x4f28e484 // scvtf.4s	v4, v4, #24
	WORD $0x4d4092e5 // ld1.s	{ v5 }[3], [x23]
	WORD $0x6e24dca4 // fmul.4s	v4, v5, v4
	WORD $0x3dc00265 // ldr	q5, [x19]
	WORD $0x4f831085 // fmla.4s	v5, v4, v3[0]
	WORD $0x3c810665 // str	q5, [x19], #16
	WORD $0x91001295 // add	x21, x20, #4
	WORD $0x91002296 // add	x22, x20, #8
	WORD $0xaa1503f4 // mov	x20, x21
	WORD $0xeb0a02df // cmp	x22, x10
	BLE  BB0_12

BB0_13:
	WORD $0xeb0a02bf // cmp	x21, x10
	BGE  BB0_8

BB0_14:
	WORD $0x3c7568c4 // ldr	b4, [x6, x21]
	WORD $0x0f08a484 // sshll.8h	v4, v4, #0
	WORD $0x0f10a484 // sshll.4s	v4, v4, #0
	WORD $0x5e21d884 // scvtf	s4, s4
	WORD $0x9ace0eb3 // sdiv	x19, x21, x14
	WORD $0xbc7378e5 // ldr	s5, [x7, x19, lsl #2]
	WORD $0xbc757986 // ldr	s6, [x12, x21, lsl #2]
	WORD $0x1e240864 // fmul	s4, s3, s4
	WORD $0x1f051884 // fmadd	s4, s4, s5, s6
	WORD $0xbc357984 // str	s4, [x12, x21, lsl #2]
	WORD $0x910006b5 // add	x21, x21, #1
	WORD $0xeb15015f // cmp	x10, x21
	BNE  BB0_14
	B    BB0_8

BB0_15:
	WORD $0xf100115f // cmp	x10, #4
	BGE  BB0_18
	WORD $0xf100015f // cmp	x10, #0
	BLE  BB0_3
	WORD $0xd2800010 // mov	x16, #0                         ; =0x0
	WORD $0xd2800011 // mov	x17, #0                         ; =0x0
	WORD $0xb5000243 // cbnz	x3, LBB0_22
	B    BB0_26

BB0_18:
	WORD $0xd2800010 // mov	x16, #0                         ; =0x0
	WORD $0xb4000323 // cbz	x3, LBB0_23
	WORD $0xaa0403f1 // mov	x17, x4
	WORD $0xaa0303e6 // mov	x6, x3
	WORD $0xaa0c03e7 // mov	x7, x12

BB0_20:
	WORD $0x3cc104e3 // ldr	q3, [x7], #16
	WORD $0x3cc104c4 // ldr	q4, [x6], #16
	WORD $0x4e24d463 // fadd.4s	v3, v3, v4
	WORD $0x4e22f463 // fmax.4s	v3, v3, v2
	WORD $0x3c810623 // str	q3, [x17], #16
	WORD $0x91002213 // add	x19, x16, #8
	WORD $0x91001210 // add	x16, x16, #4
	WORD $0xeb0a027f // cmp	x19, x10
	BLE  BB0_20
	WORD $0xeb0a021f // cmp	x16, x10
	BHS  BB0_3

BB0_22:
	WORD $0xbc707983 // ldr	s3, [x12, x16, lsl #2]
	WORD $0xbc707864 // ldr	s4, [x3, x16, lsl #2]
	WORD $0x1e242863 // fadd	s3, s3, s4
	WORD $0x1e202068 // fcmp	s3, #0.0
	WORD $0x1e234c23 // fcsel	s3, s1, s3, mi
	WORD $0xbc307883 // str	s3, [x4, x16, lsl #2]
	WORD $0x91000610 // add	x16, x16, #1
	WORD $0xeb10015f // cmp	x10, x16
	BNE  BB0_22
	B    BB0_3

BB0_23:
	WORD $0xd2800011 // mov	x17, #0                         ; =0x0

BB0_24:
	WORD $0x3cf06983 // ldr	q3, [x12, x16]
	WORD $0x4e22f463 // fmax.4s	v3, v3, v2
	WORD $0x3cb06883 // str	q3, [x4, x16]
	WORD $0x91002226 // add	x6, x17, #8
	WORD $0x91001231 // add	x17, x17, #4
	WORD $0x91004210 // add	x16, x16, #16
	WORD $0xeb0a00df // cmp	x6, x10
	BLE  BB0_24
	WORD $0xeb0a023f // cmp	x17, x10
	BHS  BB0_3

BB0_26:
	WORD $0xbc717983 // ldr	s3, [x12, x17, lsl #2]
	WORD $0x1e202068 // fcmp	s3, #0.0
	WORD $0x1e234c23 // fcsel	s3, s1, s3, mi
	WORD $0xbc317883 // str	s3, [x4, x17, lsl #2]
	WORD $0x91000631 // add	x17, x17, #1
	WORD $0xeb11015f // cmp	x10, x17
	BNE  BB0_26
	B    BB0_3

BB0_27:
	WORD $0xd100c3bf // sub	sp, x29, #48
	WORD $0xa9437bfd // ldp	x29, x30, [sp, #48]             ; 16-byte Folded Reload
	WORD $0xa9424ff4 // ldp	x20, x19, [sp, #32]             ; 16-byte Folded Reload
	WORD $0xa94157f6 // ldp	x22, x21, [sp, #16]             ; 16-byte Folded Reload
	WORD $0xa9405ff8 // ldp	x24, x23, [sp], #64             ; 16-byte Folded Reload [transformed]

BB0_28:
	RET
