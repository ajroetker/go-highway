// Code generated by github.com/ajroetker/go-highway/cmd/hwygen. DO NOT EDIT.

//go:build amd64 && goexperiment.simd

package rabitq

import (
	"os"
	"simd/archsimd"
)

var BitProduct func(code []uint64, q1 []uint64, q2 []uint64, q3 []uint64, q4 []uint64) uint32
var QuantizeVectors func(unitVectors []float32, codes []uint64, dotProducts []float32, codeCounts []uint32, sqrtDimsInv float32, count int, dims int, width int)

func init() {
	if os.Getenv("HWY_NO_SIMD") != "" {
		initRabitqFallback()
		return
	}
	if archsimd.X86.AVX512() {
		initRabitqAVX512()
		return
	}
	if archsimd.X86.AVX2() {
		initRabitqAVX2()
		return
	}
	initRabitqFallback()
}

func initRabitqAVX2() {
	BitProduct = BaseBitProduct_avx2
	QuantizeVectors = BaseQuantizeVectors_avx2
}

func initRabitqAVX512() {
	BitProduct = BaseBitProduct_avx512
	QuantizeVectors = BaseQuantizeVectors_avx512
}

func initRabitqFallback() {
	BitProduct = BaseBitProduct_fallback
	QuantizeVectors = BaseQuantizeVectors_fallback
}
