// Code generated by hwygen. DO NOT EDIT.
//go:build amd64 && goexperiment.simd

package sort

import (
	"os"

	"github.com/ajroetker/go-highway/hwy"
	"simd/archsimd"
)

var FloatToSortableFloat32 func(data []float32)
var FloatToSortableFloat64 func(data []float64)
var SortableToFloatFloat32 func(data []float32)
var SortableToFloatFloat64 func(data []float64)

// FloatToSortable is the generic API that dispatches to the appropriate SIMD implementation.
func FloatToSortable[T hwy.Floats](data []T) {
	switch any(data).(type) {
	case []float32:
		FloatToSortableFloat32(any(data).([]float32))
	case []float64:
		FloatToSortableFloat64(any(data).([]float64))
	}
}

// SortableToFloat is the generic API that dispatches to the appropriate SIMD implementation.
func SortableToFloat[T hwy.Floats](data []T) {
	switch any(data).(type) {
	case []float32:
		SortableToFloatFloat32(any(data).([]float32))
	case []float64:
		SortableToFloatFloat64(any(data).([]float64))
	}
}

func init() {
	if os.Getenv("HWY_NO_SIMD") != "" {
		initRadix_floatFallback()
		return
	}
	if archsimd.X86.AVX2() {
		initRadix_floatAVX2()
		return
	}
	if archsimd.X86.AVX512() {
		initRadix_floatAVX512()
		return
	}
	initRadix_floatFallback()
}

func initRadix_floatAVX2() {
	FloatToSortableFloat32 = BaseFloatToSortable_avx2
	FloatToSortableFloat64 = BaseFloatToSortable_avx2_Float64
	SortableToFloatFloat32 = BaseSortableToFloat_avx2
	SortableToFloatFloat64 = BaseSortableToFloat_avx2_Float64
}

func initRadix_floatAVX512() {
	FloatToSortableFloat32 = BaseFloatToSortable_avx512
	FloatToSortableFloat64 = BaseFloatToSortable_avx512_Float64
	SortableToFloatFloat32 = BaseSortableToFloat_avx512
	SortableToFloatFloat64 = BaseSortableToFloat_avx512_Float64
}

func initRadix_floatFallback() {
	FloatToSortableFloat32 = BaseFloatToSortable_fallback
	FloatToSortableFloat64 = BaseFloatToSortable_fallback_Float64
	SortableToFloatFloat32 = BaseSortableToFloat_fallback
	SortableToFloatFloat64 = BaseSortableToFloat_fallback_Float64
}
