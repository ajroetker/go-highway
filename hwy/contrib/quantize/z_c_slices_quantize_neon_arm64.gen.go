//go:build !noasm && arm64
// Code generated by hwygen -c. DO NOT EDIT.

package quantize

import (
	"unsafe"

	"github.com/ajroetker/go-highway/hwy"
	"github.com/ajroetker/go-highway/hwy/contrib/quantize/asm"
)

func init() {
	initQuantizeNeonCAsm()
}

func initQuantizeNeonCAsm() {
	if hwy.NoSimdEnv() {
		return
	}
	DequantizeUint8 = dequantizeUint8AsmF32
	QuantizeFloat32 = quantizeFloat32AsmF32
}

func dequantizeUint8AsmF32(input []uint8, output []float32, min, scale float32) {
	var p_input unsafe.Pointer
	if len(input) > 0 {
		p_input = unsafe.Pointer(&input[0])
	}
	var p_output unsafe.Pointer
	if len(output) > 0 {
		p_output = unsafe.Pointer(&output[0])
	}
	minVal := min
	scaleVal := scale
	len_inputVal := int64(len(input))
	len_outputVal := int64(len(output))
	asm.DequantizeUint8_F32(
		p_input,
		p_output,
		unsafe.Pointer(&minVal),
		unsafe.Pointer(&scaleVal),
		unsafe.Pointer(&len_inputVal),
		unsafe.Pointer(&len_outputVal),
	)
}

func quantizeFloat32AsmF32(input []float32, output []uint8, min, scale float32) {
	var p_input unsafe.Pointer
	if len(input) > 0 {
		p_input = unsafe.Pointer(&input[0])
	}
	var p_output unsafe.Pointer
	if len(output) > 0 {
		p_output = unsafe.Pointer(&output[0])
	}
	minVal := min
	scaleVal := scale
	len_inputVal := int64(len(input))
	len_outputVal := int64(len(output))
	asm.QuantizeFloat32_F32(
		p_input,
		p_output,
		unsafe.Pointer(&minVal),
		unsafe.Pointer(&scaleVal),
		unsafe.Pointer(&len_inputVal),
		unsafe.Pointer(&len_outputVal),
	)
}

